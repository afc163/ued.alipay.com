define("gallery/keymaster/1.0.2/keymaster",[],function(e,n,t){function o(e,n){for(var t=e.length;t--;)if(e[t]===n)return t;return-1}function r(e,n){if(e.length!=n.length)return!1;for(var t=0;e.length>t;t++)if(e[t]!==n[t])return!1;return!0}function i(e){for(b in K)K[b]=e[B[b]]}function l(e,n){var t,r,l,c,f;if(t=e.keyCode,-1==o(L,t)&&L.push(t),(93==t||224==t)&&(t=91),t in K){K[t]=!0;for(l in S)S[l]==t&&(a[l]=!0)}else if(i(e),a.filter.call(this,e)&&t in C)for(c=0;C[t].length>c;c++)if(r=C[t][c],r.scope==n||"all"==r.scope){f=r.mods.length>0;for(l in K)(!K[l]&&o(r.mods,+l)>-1||K[l]&&-1==o(r.mods,+l))&&(f=!1);(0!=r.mods.length||K[16]||K[18]||K[17]||K[91])&&!f||r.method(e,r)===!1&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}function c(e){var n,t=e.keyCode,r=o(L,t);if(r>=0&&L.splice(r,1),(93==t||224==t)&&(t=91),t in K){K[t]=!1;for(n in S)S[n]==t&&(a[n]=!1)}}function f(){for(b in K)K[b]=!1;for(b in S)a[b]=!1}function a(e,n,t){var o,r;o=v(e),void 0===t&&(t=n,n="all");for(var i=0;o.length>i;i++)r=[],e=o[i].split("+"),e.length>1&&(r=k(e),e=[e[e.length-1]]),e=e[0],e=A(e),e in C||(C[e]=[]),C[e].push({shortcut:o[i],scope:n,method:t,key:o[i],mods:r})}function u(e,n){var t,o,i=e.split("+"),l=[];if(i.length>1&&(l=k(i),e=i[i.length-1]),e=A(e),void 0===n&&(n=g()),C[e])for(t in C[e])o=C[e][t],o.scope===n&&r(o.mods,l)&&(C[e][t]={})}function s(e){return"string"==typeof e&&(e=A(e)),-1!=o(L,e)}function d(){return L.slice(0)}function p(e){var n=(e.target||e.srcElement).tagName;return!("INPUT"==n||"SELECT"==n||"TEXTAREA"==n)}function h(e){P=e||"all"}function g(){return P||"all"}function y(e){var n,t,o;for(n in C)for(t=C[n],o=0;t.length>o;)t[o].scope===e?t.splice(o,1):o++}function v(e){var n;return e=e.replace(/\s/g,""),n=e.split(","),""==n[n.length-1]&&(n[n.length-2]+=","),n}function k(e){for(var n=e.slice(0,e.length-1),t=0;n.length>t;t++)n[t]=S[n[t]];return n}function m(e,n,t){e.addEventListener?e.addEventListener(n,t,!1):e.attachEvent&&e.attachEvent("on"+n,function(){t(window.event)})}function E(){var e=w.key;return w.key=D,e}var b,w={},C={},K={16:!1,18:!1,17:!1,91:!1},P="all",S={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},T={backspace:8,tab:9,clear:12,enter:13,"return":13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,"delete":46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},A=function(e){return T[e]||e.toUpperCase().charCodeAt(0)},L=[];for(b=1;20>b;b++)T["f"+b]=111+b;var B={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};for(b in S)a[b]=!1;m(document,"keydown",function(e){l(e,P)}),m(document,"keyup",c),m(window,"focus",f);var D=w.key;w.key=a,w.key.setScope=h,w.key.getScope=g,w.key.deleteScope=y,w.key.filter=p,w.key.isPressed=s,w.key.getPressedKeyCodes=d,w.key.noConflict=E,w.key.unbind=u,t!==void 0&&(t.exports=w.key)});
